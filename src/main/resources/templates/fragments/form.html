<html xmlns:th="http://www.thymeleaf.org">
<body>
    <th:block th:fragment="auth(actionName, btnSubmitName)">
        <form th:action="${actionName}" method="post">
            <input type="hidden" name="id" th:value="${id}"/>
            <div class="form-group row">
                <div class="col-sm-5">
                    <div class="alert alert-success" role="alert" th:if="${message != null}">
                        <span th:text="${message}"></span>
                    </div>
                </div>
                <div class="col-sm-5">
                    <div class="alert alert-danger" role="alert" th:if="${error != null}">
                        <span th:text="${error}"></span>
                    </div>
                </div>
                <div class="col-sm-5">
                    <div class="alert alert-warning" role="alert" th:if="${warning != null}">
                        <span th:text="${warning}"></span>
                    </div>
                </div>
            </div>
            <div class="form-group row" >
                <div class="col-sm-5">
                    <input th:class="'form-control ' + ${usernameError != null ? 'is-invalid' : ''}"
                           type="text"
                           th:name="username"
                           name="username"
                           th:value="${user?.username}"
                           placeholder="Użytkownik"/>
                    <div th:if="${usernameError}" class="invalid-feedback" th:text="${usernameError}"></div>
                </div>
            </div>
            <div class="form-group row" th:if="${actionName == '/registration' || actionName == '/user/profile'}">
                <div class="col-sm-5">
                    <input th:class="'form-control ' + ${emailError != null ? 'is-invalid' : ''}"
                           type="email"
                           th:name="email"
                           name="email"
                           th:value="${user?.email}"
                           placeholder="Email"/>
                    <div th:if="${emailError}" class="invalid-feedback" th:text="${emailError}"></div>
                </div>
            </div>
            <div class="form-group row" th:if="${actionName == '/user/profile'}">
                <div class="col-sm-5">
                    <input class="form-control" type="password" name="oldPassword"  placeholder="Stare hasło"/>
                </div>
            </div>
            <div class="form-group row">
                <div class="col-sm-5">
                    <input th:class="'form-control ' + ${passwordError != null ? 'is-invalid' : ''}"
                           type="password"
                           th:name="password"
                           name="password"
                           th:value="${user?.password}"
                           th:placeholder="${actionName == '/user/profile'  ? 'Nowe hasło' : 'Hasło'}"/>
                    <div th:if="${passwordError}" class="invalid-feedback" th:text="${passwordError}"></div>
                </div>
            </div>
            <div class="form-group row" th:if="${actionName == '/registration' || actionName == '/user/profile'}">
                <div class="col-sm-5">
                    <input th:class="'form-control ' + ${passwordConfirmError != null ? 'is-invalid' : ''}"
                           type="password"
                           th:name="passwordConfirm"
                           name="passwordConfirm"
                           th:value="${user?.passwordConfirm}"
                           placeholder="Powtórz hasło"/>
                    <div th:if="${passwordConfirmError}" class="invalid-feedback" th:text="${passwordConfirmError}"></div>
                </div>
            </div>
            <button class="btn btn-primary" type="submit" th:text="${btnSubmitName}"/>
        </form>
    </th:block>
</body>
</html>
